<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilot Trainer Supply/Demand Planner</title>
    <link rel="stylesheet" href="styles.css?v=2025012714">
    <script>
        // Apply dark mode immediately to prevent flash
        const isDarkMode = localStorage.getItem('darkMode') === 'true';
        if (isDarkMode) {
            document.documentElement.classList.add('dark-mode-loading');
            // Also store the active tab for proper styling
            const activeTab = localStorage.getItem('activeTab') || 'dashboard';
            document.documentElement.setAttribute('data-active-tab', activeTab);
        }
        // Store current location for immediate application
        const savedLocation = localStorage.getItem('currentLocation');
        if (savedLocation) {
            document.documentElement.setAttribute('data-location', savedLocation);
        }
    </script>
    <style>
        /* Critical inline styles to prevent FOUC */
        .table-container { min-height: 100px; }
        .sticky-first-column { left: 0 !important; }
        
        /* Apply active state based on saved location */
        html[data-location="AU"] .location-toggle[data-location="AU"],
        html:not([data-location]) .location-toggle[data-location="AU"] {
            background-color: #2196F3;
            color: white;
        }
        html[data-location="NZ"] .location-toggle[data-location="NZ"] {
            background-color: #2196F3;
            color: white;
        }
        
        /* Dark mode button styles to prevent flash */
        html.dark-mode-loading #dark-mode-toggle {
            background-color: #444;
            color: #e0e0e0;
            border-color: #666;
        }
        html.dark-mode-loading .btn.btn-secondary {
            background-color: #444;
            border-color: #666;
            color: #e0e0e0;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Pilot Trainer Supply/Demand Planner</h1>
            <div class="header-controls">
                <nav class="main-nav">
                    <button class="nav-tab active" data-view="dashboard">Dashboard</button>
                    <button class="nav-tab" data-view="planner">Planner</button>
                    <button class="nav-tab" data-view="settings">Settings</button>
                    <button class="nav-tab" data-view="scenarios">Scenarios</button>
                </nav>
                <div class="location-selector">
                    <button class="location-toggle" data-location="AU">AU</button>
                    <button class="location-toggle" data-location="NZ">NZ</button>
                </div>
                <button id="dark-mode-toggle" class="btn btn-secondary" title="Toggle Dark Mode">
                    <span class="dark-mode-icon">üåô</span>
                </button>
            </div>
        </header>

        <!-- Dashboard View -->
        <div id="dashboard-view" class="view active">
            <div class="dashboard-container">
                <!-- Key Metrics Cards -->
                <div class="metrics-row">
                    <div class="metric-card">
                        <div class="metric-icon">üë•</div>
                        <div class="metric-content">
                            <div class="metric-value" id="total-trainees">0</div>
                            <div class="metric-label">Total Trainees in Training</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">üìä</div>
                        <div class="metric-content">
                            <div class="metric-value" id="trainer-utilization">0%</div>
                            <div class="metric-label">Trainer Utilization</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">üéì</div>
                        <div class="metric-content">
                            <div class="metric-value" id="upcoming-completions">0</div>
                            <div class="metric-label">Completions Next 3 Months</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">‚ö†Ô∏è</div>
                        <div class="metric-content">
                            <div class="metric-value" id="capacity-warnings">0</div>
                            <div class="metric-label">Capacity Warnings</div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-row">
                    <div class="chart-container">
                        <h3>Trainer Demand Over Time</h3>
                        <canvas id="demand-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Current Training Distribution</h3>
                        <canvas id="distribution-chart"></canvas>
                    </div>
                </div>

                <!-- Training Pipeline -->
                <div class="pipeline-section">
                    <h3>Training Pipeline</h3>
                    <div id="pipeline-timeline"></div>
                </div>

                <!-- Alerts Section -->
                <div class="alerts-section">
                    <h3>Alerts & Warnings</h3>
                    <div id="alerts-container"></div>
                </div>
            </div>
        </div>

        <!-- Planner View -->
        <div id="planner-view" class="view">
            <!-- Add Cohort Section -->
            <section class="add-cohort-section">
                <div class="section-header">
                    <h2>Add New Cohort</h2>
                    <button id="training-planner-btn" class="btn btn-secondary">Training Planner</button>
                </div>
                <form id="add-cohort-form" class="add-cohort-form">
                    <div class="form-group">
                        <label for="num-trainees">Number of Trainees:</label>
                        <input type="number" id="num-trainees" name="numTrainees" min="1" value="2" required>
                    </div>
                    <div class="form-group">
                        <label for="pathway">Pathway:</label>
                        <select id="pathway" name="pathway" required>
                            <option value="">Select a pathway</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="start-year">Start Year:</label>
                        <select id="start-year" name="startYear" required>
                            <option value="">Select year</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="start-fortnight">Start Fortnight:</label>
                        <select id="start-fortnight" name="startFortnight" required>
                            <option value="">Select fortnight</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Add Cohort</button>
                </form>
            </section>

            <!-- View Controls Section -->
            <section class="view-controls-section">
                <div class="view-controls">
                    <button id="nav-left" class="nav-arrow" title="Previous period">‚óÄ</button>
                    <button class="view-btn" data-view="6months">6M</button>
                    <button class="view-btn active" data-view="12months">12M</button>
                    <button id="nav-right" class="nav-arrow" title="Next period">‚ñ∂</button>
                    <div class="separator"></div>
                    <button class="view-btn" data-view="all">All</button>
                    <div class="separator"></div>
                    <button id="today-btn" class="today-btn">üìç Today</button>
                </div>
            </section>

            <!-- FTE Summary Section -->
            <section class="fte-summary-section">
                <div class="section-header">
                    <h2>
                        <button id="toggle-fte-btn" class="toggle-btn" aria-expanded="false">
                            <span class="toggle-icon">+</span>
                        </button>
                        FTE Summary
                    </h2>
                    <button id="edit-fte-btn" class="btn btn-secondary">Edit FTE</button>
                </div>
                <div id="fte-summary-table-container" class="table-container">
                    <!-- FTE Summary table will be generated here -->
                </div>
            </section>

            <!-- Gantt Chart Section -->
            <section class="gantt-chart-section">
                <div class="section-header">
                    <h2>Training Timeline (Gantt Chart)</h2>
                    <div class="gantt-controls">
                        <select id="group-by-filter" class="filter-select">
                            <option value="none">No Grouping</option>
                            <option value="type">Group by Type</option>
                        </select>
                        <button id="copy-table-data" class="btn btn-secondary" style="margin-left: 10px;">üìã Copy Tables</button>
                    </div>
                </div>
                <div id="gantt-chart-container" class="gantt-container">
                    <!-- Gantt chart will be generated here -->
                </div>
                <div class="gantt-legend">
                    <span class="legend-item">
                        <span class="legend-box" style="background: #4CAF50;"></span>
                        <span>GS+SIM Phase</span>
                    </span>
                    <span class="legend-item">
                        <span class="legend-box" style="background: #2196F3;"></span>
                        <span>Line Training (Home Location)</span>
                    </span>
                    <span class="legend-item">
                        <span class="legend-box" style="background: #2196F3; background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.2) 5px, rgba(255,255,255,0.2) 10px);"></span>
                        <span>Line Training (Cross-Location)</span>
                    </span>
                </div>
            </section>

            <!-- Training Commencement Summary Section -->
            <section class="commencement-summary-section">
                <div class="section-header">
                    <h2>
                        <button id="toggle-commencement-btn" class="toggle-btn" aria-expanded="false">
                            <span class="toggle-icon">+</span>
                        </button>
                        Training Commencement Summary
                    </h2>
                </div>
                <div id="commencement-summary-container" class="table-container" style="display: none;">
                    <!-- Commencement summary table will be generated here -->
                </div>
            </section>

            <!-- Demand Table Section -->
            <section class="demand-table-section">
                <h2>Trainer Demand</h2>
                <div id="demand-table-container" class="table-container">
                    <!-- Demand table will be generated here -->
                </div>
            </section>

            <!-- Surplus/Deficit Table Section -->
            <section class="surplus-deficit-section">
                <div class="section-header">
                    <h2>Surplus/Deficit Analysis</h2>
                    <div class="surplus-deficit-controls">
                        <button id="toggle-sd-view" class="btn btn-secondary" title="Toggle between classic and intuitive view">
                            <span class="toggle-view-icon">üìä</span>
                            <span class="toggle-view-text">Switch to Intuitive View</span>
                        </button>
                    </div>
                </div>
                <div id="surplus-deficit-container" class="table-container">
                    <!-- Surplus/Deficit table will be generated here -->
                </div>
            </section>

            <!-- Cross-Location Summary Section -->
            <section class="cross-location-summary-section">
                <div class="section-header">
                    <h2>Cross-Location Trainer Movement Summary</h2>
                </div>
                <div id="cross-location-summary-container" class="table-container">
                    <!-- Cross-location summary will be generated here -->
                </div>
            </section>
        </div>

        <!-- Settings View -->
        <div id="settings-view" class="view">
            <section class="priority-settings-section">
                <div class="section-header">
                    <h2>Priority Settings
                        <span class="info-icon">i
                            <div class="tooltip-content">
                                <h4>How Priority Allocation Works:</h4>
                                <ul>
                                    <li><strong>P1 (LT-CAD):</strong> Served first by CATB, CATA, STP</li>
                                    <li><strong>P2 (LT-CP):</strong> Served by RHS + any surplus from P1 trainers</li>
                                    <li><strong>P3 (LT-FO):</strong> Served by LHS + any surplus from all other trainers</li>
                                </ul>
                                <h4>Trainer Capabilities:</h4>
                                <ul>
                                    <li><strong>CATB, CATA, STP:</strong> Can perform all line training types (LT-CAD, LT-CP, LT-FO)</li>
                                    <li><strong>RHS:</strong> Can perform LT-CP and LT-FO only (cannot do LT-CAD)</li>
                                    <li><strong>LHS:</strong> Can perform LT-FO only</li>
                                </ul>
                            </div>
                        </span>
                    </h2>
                    <button id="edit-priority-btn" class="btn btn-secondary">Edit Priorities</button>
                </div>
                <div id="priority-settings-container" class="table-container">
                    <!-- Priority settings table will be generated here -->
                </div>
            </section>
            
            <section class="pathways-section">
                <div class="section-header">
                    <h2>Training Pathways</h2>
                    <button id="add-pathway-btn" class="btn btn-primary">Add New Pathway</button>
                </div>
                <div class="location-tabs">
                    <button class="location-tab active" data-location="AU">AU</button>
                    <button class="location-tab" data-location="NZ">NZ</button>
                </div>
                <div id="pathways-table-container" class="table-container">
                    <!-- Pathways table will be generated here -->
                </div>
            </section>
        </div>

        <!-- Modal for FTE Editing -->
        <div id="fte-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Edit Trainer FTE</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="fte-edit-form">
                        <div id="fte-edit-container">
                            <!-- FTE edit form will be generated here -->
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Modal for Pathway Editing -->
        <div id="pathway-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="pathway-modal-title">Add New Pathway</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="pathway-edit-form">
                        <div class="form-group">
                            <label for="pathway-name">Pathway Name:</label>
                            <input type="text" id="pathway-name" name="pathwayName" required>
                        </div>
                        <div id="pathway-phases-container">
                            <!-- Phase inputs will be generated here -->
                        </div>
                        <button type="button" id="add-phase-btn" class="btn btn-secondary">Add Phase</button>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary">Save Pathway</button>
                            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Modal for Cohort Editing -->
        <div id="cohort-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Edit Cohort</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="cohort-edit-form">
                        <div class="form-group">
                            <label for="edit-num-trainees">Number of Trainees:</label>
                            <input type="number" id="edit-num-trainees" name="numTrainees" min="1" required>
                        </div>
                        <div class="form-group">
                            <label for="edit-pathway">Pathway:</label>
                            <select id="edit-pathway" name="pathway" required>
                                <option value="">Select a pathway</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="edit-start-year">Start Year:</label>
                            <select id="edit-start-year" name="startYear" required>
                                <option value="">Select year</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="edit-start-fortnight">Start Fortnight:</label>
                            <select id="edit-start-fortnight" name="startFortnight" required>
                                <option value="">Select fortnight</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="edit-location">Location:</label>
                            <select id="edit-location" name="location" required>
                                <option value="AU">AU</option>
                                <option value="NZ">NZ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enable-cross-location" name="enableCrossLocation">
                                Enable cross-location trainer usage
                            </label>
                        </div>
                        <div id="cross-location-config" class="cross-location-section" style="display: none;">
                            <!-- Cross-location configuration will be dynamically generated here -->
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Modal for Priority Settings -->
        <div id="priority-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Edit Priority Settings</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="priority-edit-form">
                        <div id="priority-edit-container">
                            <!-- Priority edit form will be generated here -->
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary">Save Changes</button>
                            <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Training Planner Modal -->
        <div id="training-planner-modal" class="modal">
            <div class="modal-content" style="max-width: 800px;">
                <span class="modal-close">&times;</span>
                <h2>Training Planner</h2>
                
                <div class="planner-tabs">
                    <button class="planner-tab active" data-tab="grid">Grid Entry</button>
                    <button class="planner-tab" data-tab="target">Target Optimizer</button>
                    <button class="planner-tab" data-tab="bulk">Bulk Input</button>
                </div>
                
                <!-- Grid Entry Tab -->
                <div id="grid-tab" class="planner-content active">
                    <h3>Grid Entry</h3>
                    <p>Quickly add multiple cohorts by entering trainee numbers in the grid</p>
                    <p style="font-size: 0.85em; color: #666; margin-top: -10px;">
                        üí° Tip: You can paste data from Excel! Copy your data and paste into any cell.
                    </p>
                    
                    <div class="grid-entry-form">
                        <div class="grid-period-selector" style="display: flex; gap: 15px; margin-bottom: 20px; align-items: center;">
                            <label>Planning Period:</label>
                            <select id="grid-start-month" style="width: 120px;">
                                <option value="0">January</option>
                                <option value="1">February</option>
                                <option value="2">March</option>
                                <option value="3">April</option>
                                <option value="4">May</option>
                                <option value="5">June</option>
                                <option value="6">July</option>
                                <option value="7">August</option>
                                <option value="8">September</option>
                                <option value="9">October</option>
                                <option value="10">November</option>
                                <option value="11">December</option>
                            </select>
                            <select id="grid-start-year" style="width: 80px;">
                                <option value="2024">2024</option>
                                <option value="2025" selected>2025</option>
                                <option value="2026">2026</option>
                                <option value="2027">2027</option>
                                <option value="2028">2028</option>
                                <option value="2029">2029</option>
                                <option value="2030">2030</option>
                                <option value="2031">2031</option>
                                <option value="2032">2032</option>
                                <option value="2033">2033</option>
                                <option value="2034">2034</option>
                            </select>
                            <label>to</label>
                            <select id="grid-end-month" style="width: 120px;">
                                <option value="0">January</option>
                                <option value="1">February</option>
                                <option value="2">March</option>
                                <option value="3">April</option>
                                <option value="4">May</option>
                                <option value="5" selected>June</option>
                                <option value="6">July</option>
                                <option value="7">August</option>
                                <option value="8">September</option>
                                <option value="9">October</option>
                                <option value="10">November</option>
                                <option value="11">December</option>
                            </select>
                            <select id="grid-end-year" style="width: 80px;">
                                <option value="2024">2024</option>
                                <option value="2025" selected>2025</option>
                                <option value="2026">2026</option>
                                <option value="2027">2027</option>
                                <option value="2028">2028</option>
                                <option value="2029">2029</option>
                                <option value="2030">2030</option>
                                <option value="2031">2031</option>
                                <option value="2032">2032</option>
                                <option value="2033">2033</option>
                                <option value="2034">2034</option>
                            </select>
                            <button id="show-grid" class="btn btn-secondary" style="display: none;">Show Grid</button>
                        </div>
                        
                        <div id="grid-container" style="display: none;">
                            <!-- Grid will be generated here -->
                        </div>
                        
                        <div class="modal-footer" style="display: none;" id="grid-footer">
                            <div style="margin-right: auto;">
                                <span id="grid-total-cohorts">Total Cohorts: 0</span> | 
                                <span id="grid-total-trainees">Total Trainees: 0</span>
                            </div>
                            <button id="grid-clear" class="btn btn-secondary">Clear</button>
                            <button id="grid-cancel" class="btn btn-secondary">Cancel</button>
                            <button id="grid-apply" class="btn btn-primary">Add All Cohorts</button>
                        </div>
                    </div>
                </div>
                
                <!-- Target Optimizer Tab -->
                <div id="target-tab" class="planner-content">
                    <h3>Target-Based Optimizer</h3>
                    <form id="target-form">
                        <div class="target-inputs" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 15px;">
                            <div class="form-group">
                                <label>CP Pilots:</label>
                                <input type="number" id="target-cp" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>FO Pilots:</label>
                                <input type="number" id="target-fo" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>CAD Pilots:</label>
                                <input type="number" id="target-cad" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label>Target Date:</label>
                                <input type="date" id="target-date" required>
                            </div>
                        </div>
                        <div class="optimizer-options" style="display: flex; gap: 30px; margin-bottom: 15px;">
                            <label style="display: flex; align-items: center; cursor: pointer; font-weight: normal;">
                                <input type="checkbox" id="consider-existing" checked style="margin-right: 8px;">
                                <span title="Work around existing cohorts to avoid GS+SIM conflicts and trainer overload">Respect existing constraints</span>
                            </label>
                            <label style="display: flex; align-items: center; cursor: pointer; font-weight: normal;">
                                <input type="checkbox" id="smooth-schedule" style="margin-right: 8px;">
                                <span title="Spread training over longer period to stay within trainer capacity">Smooth schedule</span>
                            </label>
                        </div>
                        <div id="optimization-results" class="optimization-results"></div>
                        <div class="modal-footer">
                            <button id="copy-optimization-results" class="btn btn-secondary" style="margin-right: auto;">üìã Copy Results</button>
                            <button type="submit" class="btn btn-secondary">Optimize Schedule</button>
                            <button id="apply-optimized" class="btn btn-primary" disabled>Apply Schedule</button>
                        </div>
                    </form>
                </div>
                
                <!-- Bulk Input Tab -->
                <div id="bulk-tab" class="planner-content">
                    <h3>Bulk Cohort Input</h3>
                    <p style="margin-bottom: 10px;">Enter cohorts using any of these formats:</p>
                    <ul style="font-size: 0.9em; margin-bottom: 15px; color: #666;">
                        <li><strong>Jan 2025: 4 CAD, 2 FO</strong> - Multiple cohorts per month</li>
                        <li><strong>Jan 25 4 CAD A209</strong> - Specific pathway ID (A209)</li>
                        <li><strong>4 CAD Jan 2025</strong> - Alternative order</li>
                        <li>Use 2 or 4 digit years (25 = 2025)</li>
                    </ul>
                    <textarea id="bulk-input" rows="6" style="width: 100%; font-family: monospace;" placeholder="Jan 2025: 12 FO, 8 CP
Feb 25: 10 CAD, 6 CP
Mar 25 4 CAD A209
4 FO Apr 2025
May 2025: 2 CAD A212, 4 FO A210"></textarea>
                    <div id="bulk-validation" class="validation-results" style="max-height: 300px; overflow-y: auto;"></div>
                    <div class="modal-footer">
                        <button id="validate-bulk" class="btn btn-secondary">Validate</button>
                        <button id="apply-bulk" class="btn btn-primary" disabled>Apply Schedule</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

        <!-- Scenarios View -->
        <div id="scenarios-view" class="view">
            <!-- Current Scenario Section -->
            <section>
                <div class="section-header">
                    <h2>Current Scenario</h2>
                    <div class="scenario-status">
                        <span id="current-scenario-name">New Scenario</span>
                    </div>
                </div>
                <div class="scenario-actions-container">
                    <div class="scenario-info-card">
                        <p class="scenario-description">Save your current configuration as a scenario to reload it later or create variations.</p>
                        <div class="scenario-actions">
                            <button id="update-current-scenario" class="btn btn-secondary" style="display: none;">Update Current</button>
                            <button id="save-current-scenario" class="btn btn-primary">Save As New Scenario</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Saved Scenarios Section -->
            <section>
                <div class="section-header">
                    <h2>Saved Scenarios</h2>
                    <div class="scenario-controls">
                        <input type="text" id="scenario-search" placeholder="Search scenarios..." class="search-input">
                        <select id="scenario-sort" class="filter-select">
                            <option value="date-desc">Newest First</option>
                            <option value="date-asc">Oldest First</option>
                            <option value="name-asc">Name (A-Z)</option>
                            <option value="name-desc">Name (Z-A)</option>
                            <option value="size-desc">Largest First</option>
                            <option value="size-asc">Smallest First</option>
                        </select>
                        <div class="view-toggle">
                            <button id="view-grid" class="view-btn active" title="Grid view">‚äû</button>
                            <button id="view-list" class="view-btn" title="List view">‚ò∞</button>
                        </div>
                        <button id="compare-scenarios" class="btn btn-secondary" title="Compare two scenarios" disabled>Compare</button>
                        <button id="export-all-scenarios" class="btn btn-secondary" title="Export all scenarios">Export All</button>
                        <button id="import-scenarios" class="btn btn-secondary" title="Import scenarios">Import</button>
                        <input type="file" id="import-file-input" accept=".json" style="display: none;">
                        <span class="scenario-count">0 scenarios</span>
                    </div>
                </div>
                <div id="scenario-list" class="scenario-list">
                    <!-- Scenario cards will be generated here -->
                </div>
            </section>
        </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Import Rename Modal -->
    <div id="import-rename-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>Scenario Name Conflict</h2>
            </div>
            <div class="modal-body">
                <p id="import-conflict-message">A scenario with this name already exists.</p>
                <div class="form-group">
                    <label for="import-rename-input">New Name:</label>
                    <input type="text" id="import-rename-input" required>
                </div>
                <div class="modal-actions">
                    <button id="import-rename-btn" class="btn btn-primary">Rename</button>
                    <button id="import-overwrite-btn" class="btn btn-warning">Overwrite</button>
                    <button id="import-skip-btn" class="btn btn-secondary">Skip</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scenario Comparison Modal -->
    <div id="comparison-modal" class="modal">
        <div class="modal-content" style="max-width: 1200px;">
            <div class="modal-header">
                <h2 id="comparison-title">Scenario Comparison</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="comparison-content">
                    <!-- Comparison content will be generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scenario Save Modal -->
    <div id="scenario-save-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 id="scenario-modal-title">Save Scenario</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="scenario-save-form">
                    <div class="form-group">
                        <label for="scenario-name">Scenario Name:</label>
                        <input type="text" id="scenario-name" name="scenarioName" required placeholder="e.g., Q1 2025 Plan">
                    </div>
                    <div class="form-group">
                        <label for="scenario-description">Description (optional):</label>
                        <textarea id="scenario-description" name="scenarioDescription" rows="3" 
                                  placeholder="Add notes about this scenario..."></textarea>
                    </div>
                    <div class="scenario-preview">
                        <h3>Preview</h3>
                        <div class="preview-stats">
                            <div class="preview-item">
                                <span class="preview-label">Total Cohorts:</span>
                                <span id="preview-cohorts" class="preview-value">0</span>
                            </div>
                            <div class="preview-item">
                                <span class="preview-label">Total Trainees:</span>
                                <span id="preview-trainees" class="preview-value">0</span>
                            </div>
                            <div class="preview-item">
                                <span class="preview-label">Training Period:</span>
                                <span id="preview-daterange" class="preview-value">-</span>
                            </div>
                            <div class="preview-item">
                                <span class="preview-label">Pathways:</span>
                                <span id="preview-pathways" class="preview-value">-</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Save Scenario</button>
                        <button type="button" class="btn btn-secondary modal-cancel">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Alert Dialog -->
    <div id="alert-dialog" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 400px; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <div class="modal-header">
                <h2 id="alert-title">Invalid Date Range</h2>
            </div>
            <div class="modal-body" style="text-align: center; padding: 20px;">
                <p id="alert-message" style="margin-bottom: 20px;">The end date cannot be before the start date. Please select a valid date range.</p>
                <button id="alert-ok" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div id="confirm-dialog" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 400px; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <div class="modal-header">
                <h2 id="confirm-title">Clear Grid</h2>
            </div>
            <div class="modal-body" style="text-align: center; padding: 20px;">
                <p id="confirm-message" style="margin-bottom: 20px;">Clear all entries in the grid?</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button id="confirm-yes" class="btn btn-primary">Yes</button>
                    <button id="confirm-no" class="btn btn-secondary">No</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>