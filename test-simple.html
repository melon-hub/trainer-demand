<!DOCTYPE html>
<html>
<head>
    <title>Simple Date Range Test</title>
</head>
<body>
    <h1>Testing Date Range Logic</h1>
    <div id="output"></div>
    
    <script>
        const viewState = {
            dateRange: "next6months",
            startYear: 2025,
            endYear: 2025,
            startFortnight: 10,
            endFortnight: 22
        };
        
        // Test the logic
        let output = document.getElementById('output');
        
        // What should happen:
        const startYear = viewState.startYear;  // 2025
        const endYear = viewState.endYear;      // 2025
        
        output.innerHTML += '<h3>Year Loop Test:</h3>';
        for (let year = startYear; year <= endYear; year++) {
            output.innerHTML += `<p>Processing year: ${year}</p>`;
            
            // Original logic
            const yearStartFn1 = (year === startYear && viewState.startFortnight) ? viewState.startFortnight : 1;
            const yearEndFn1 = (year === endYear && viewState.endFortnight) ? viewState.endFortnight : 24;
            
            output.innerHTML += `<p>Original: Year ${year} - FN${yearStartFn1} to FN${yearEndFn1}</p>`;
            
            // New logic
            const yearStartFn2 = (year === startYear && viewState.dateRange !== 'all') ? viewState.startFortnight : 1;
            const yearEndFn2 = (year === endYear && viewState.dateRange !== 'all') ? viewState.endFortnight : 24;
            
            output.innerHTML += `<p>New: Year ${year} - FN${yearStartFn2} to FN${yearEndFn2}</p>`;
            
            // Count fortnights
            let count = 0;
            for (let fn = yearStartFn2; fn <= yearEndFn2; fn++) {
                count++;
            }
            output.innerHTML += `<p>Total fortnights: ${count}</p>`;
        }
        
        // Test the check
        output.innerHTML += '<h3>Condition Tests:</h3>';
        output.innerHTML += `<p>viewState.startYear exists: ${!!viewState.startYear}</p>`;
        output.innerHTML += `<p>viewState.dateRange !== 'all': ${viewState.dateRange !== 'all'}</p>`;
        output.innerHTML += `<p>Combined check: ${viewState.dateRange !== 'all' && viewState.startYear}</p>`;
    </script>
</body>
</html>